{"name":"Canon LBP 800 driver for Linux","tagline":"","body":"Canon LBP800 driver for linux\r\n============\r\n\r\nCanon LBP 800 linux drivers.  \r\nTested on Ubuntu 10.10, 12.04, 13.04.  \r\nVersion 0.1.8.b0\r\n\r\nWhat is this\r\n--------\r\nThis is driver for Canon LBP800 printer (with CAPT protocol via parallel port).\r\n\r\nHow to install on Ubuntu 13.04\r\n--------\r\n\r\nI write this manual after I spend a whole day to setup this printer on Ubuntu :)  \r\nIf you have some ideas or recommendations to improve this manual — fill free to drop me a line to mail@aleksejleonov.com.\r\n\r\n#### 0. Check BIOS settings\r\n\r\nYour parallel port settings should be:\r\n* Parallel port must be enabled.\r\n* **Mode: EPP** — very important.\r\n\r\nAlso, I have next options and it works for me (but other options, like I/O 278 or IRQ 5 should also work fine):\r\n* I/O Address: 378\r\n* IRQ: 7\r\n\r\n#### 1. Download and unpack driver sources\r\n\r\n```bash\r\ncd ~\r\nmkdir lbp800 && cd lbp800\r\nwget https://github.com/aleksejleonov/lbp800_linux/archive/0.1.8.b0.tar.gz\r\ntar zxf 0.1.8.b0.tar.gz && cd lbp800_linux-0.1.8.b0\r\n```\r\n\r\n#### 2. Install packages that will be needed to compile driver\r\n\r\n```bash\r\nsudo apt-get install build-essential\r\nsudo apt-get install libcups2-dev\r\n```\r\n\r\n#### 3. Remove libsane-hpaio package\r\n\r\nlibsane-hpaio package can try to use parallel port (/dev/lp0) and this can lead to conflicts.\r\n\r\n```bash\r\nsudo apt-get purge libsane-hpaio\r\n```\r\n\r\n#### 4. Make & Install driver\r\n\r\n```bash\r\ncd ~/lbp800/lbp800_linux-0.1.8.b0\r\nmake\r\nsudo make install\r\n```\r\n\r\n#### 5. Check parallel port modules\r\n\r\nYou need to check that **lp**, **ppdev**, **parport_pc** modules are loaded and works.\r\n\r\n```bash\r\nlsmod | grep lp\r\n################################\r\n# You have get something like: #\r\n################################\r\n#\r\n# lp                     13299  0\r\n# parport                40753  3 lp,ppdev,parport_pc\r\n\r\nlsmod | grep ppdev\r\n################################\r\n# You have get something like: #\r\n################################\r\n#\r\n# ppdev                  12817  0\r\n# parport                40753  3 lp,ppdev,parport_pc\r\n\r\nlsmod | grep parport_pc\r\n################################\r\n# You have get something like: #\r\n################################\r\n#\r\n# parport_pc             27504  1\r\n# parport                40753  3 lp,ppdev,parport_pc\r\n```\r\n\r\nIf some of this modules missed in output, you need to add this module to ```/etc/modules```.  \r\nExample (if **parport_pc** module is missed):\r\n\r\n```bash\r\nlsmod | grep parport_pc\r\n# You have no output -- module missed\r\n\r\nsudo nano /etc/modules\r\n#####################################################\r\n# Add \"parport_pc\" as new string at the end of file #\r\n#####################################################\r\n```\r\n\r\n#### 6. Add users to \"lp\" group\r\n\r\nYou should add all users that will print on LBP800 to **lp** linux group.\r\n\r\n```bash\r\n##\r\n# Change username1, username2 to real account names\r\n##\r\nsudo usermod -a -G lp username1\r\nsudo usermod -a -G lp username2\r\n```\r\n\r\n#### 7. Reboot\r\n\r\nDon't forget to turn on printer before PC!\r\n\r\n```bash\r\nsudo reboot\r\n```\r\n\r\n#### 8. Check printer\r\n\r\nCheck that linux can see your printer:\r\n\r\n```bash\r\nsudo cat /proc/sys/dev/parport/parport*/autoprobe*\r\n##\r\n# You should get:\r\n##\r\n# CLASS:PRINTER;\r\n# MODEL:LBP-800;\r\n# MANUFACTURER:Canon;\r\n# DESCRIPTION:Canon LBP-800;\r\n# COMMAND SET:CAPT;\r\n\r\nsudo /usr/lib/cups/backend/parallel\r\n##\r\n# You should get:\r\n##\r\n# direct parallel:/dev/lp0 \"Canon LBP-800\" \"Canon LBP-800 LPT #1\"\r\n# \"MFG:Canon;MDL:LBP-800;CMD:CAPT;VER:1.0;CLS:PRINTER;DES:Canon LBP-800\" \"\"\r\n```\r\n\r\n#### 9. Add printer\r\n\r\nOpen System settings → Printers. \r\nIf Canon LBP800 appears in list, add it.\r\n\r\nElse, if you can't find Canon LBP800 in list:\r\n* Choose \"Add by URI\" option and set URI: **parcapt:/dev/parport0** (parcapt:, not parallel:).\r\n* When you will be asked about driver, find \"Canon\" in printers list, then choose LBP800 model. (Also, you can choose PPD file from ppd folder in ~/lbp800/lbp800_linux-0.1.8.b0).\r\n\r\nTry to print test page. \r\nEverything should works :)\r\n\r\nDebugging\r\n--------\r\n\r\nIf printer still doesn't works — try to check all steps.\r\n\r\nAlso you can obtain useful info from kernel log:\r\n```bash\r\ndmesg | grep lp\r\ndmesg | grep parport\r\n```\r\n\r\nIf you have ubuntu with Apparmor (it can blocks cupsd) you should make next:\r\n```bash\r\nsudo aa-complain cupsd\r\n```\r\n\r\nOther printers\r\n--------\r\nIf you have Canon printer with USB (like LBP810, LBP1120, etc.) try to install official Canon CAPT Drivers for linux.\r\n\r\n* Detailed instructions for Ubuntu 10.04, 11.10, 12.04: [https://help.ubuntu.com/community/CanonCaptDrv190](https://help.ubuntu.com/community/CanonCaptDrv190).\r\n* Last version of Canon CAPT Drivers from official site (as on September 2013, ver. 2.6): [http://support-au.canon.com.au/contents/AU/EN/0100459602.html](http://support-au.canon.com.au/contents/AU/EN/0100459602.html).\r\n* Automated script to install Canon CAPT Drivers ver. 2.20 [https://github.com/raducotescu/CanonCAPTdriver](https://github.com/raducotescu/CanonCAPTdriver).\r\n\r\n\r\nThanks\r\n--------\r\n* Iamlolive, Fabux and other people from [http://doc.ubuntu-fr.org/imprimante_canon_lbp800](http://doc.ubuntu-fr.org/imprimante_canon_lbp800). They write great wiki (in french :), and give link to 0.1.8.b0 version of this driver.\r\n* Owner of [http://www.veneto.com/lbp800/lbp800.html](http://www.veneto.com/lbp800/lbp800.html) for 0.1.2 version. (Now this site isn't available).\r\n* Rildo Pragana ([http://pragana.net](http://pragana.net)), for his driver for another\r\n  GDI winprinter (Samsung ML-85G).\r\n* Nicolas Boichat <nicolas@boichat.ch>, for his driver for canon\r\n  LBP-810 USB GDI printer.\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}